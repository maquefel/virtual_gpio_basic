DESCRIPTION
------------

Virtual gpio module for using together with ivshmem qemu

REQUIREMENTS
------------

linux kernel 2.6.34

COMPILATION
------------

KDIR={$PATH_TO_KERNEL_SOURCE_DIRECTORY} make

optional ARCH={$ARCH}
optional CROSS_COMPILE={$CROSSCOMPILER_PREFIX}

USAGE
------------

$ qemu-system-{$ARCH} (...) -device ivshmem,shm=ivshmem,size=1

guest machine:
# insmod virtual_gpio_basic.ko

optional parameter gpiobase=

# ls /sys/class/gpio/
export       gpiochip248  unexport

# cat /sys/class/gpio/gpiochip248/label
0000:00:0d.0

# cat /sys/class/gpio/gpiochip248/base
248

# cat /sys/class/gpio/gpiochip248/ngpio
8

# echo 248 > /sys/class/gpio/export
# echo high > /sys/class/gpio/gpio248/direction

host machine:
$ xxd -b -l 2 -c 2 /dev/shm/ivshmem
0000000: 00000001 00000001  ..

vg_get_set:

$ ./vg_get_set -r 0
main:222:: read 0=1

$ ./vg_get_set -i 1
main:239:: write 1=1

guest machine:

# cat gpio1/value
1


